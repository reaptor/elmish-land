{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://elmish.land/elmish-land.schema.json",
  "title": "Elmish Land Configuration",
  "description": "Configuration file for Elmish Land applications",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "The JSON schema reference"
    },
    "program": {
      "type": "object",
      "description": "Controls how your Elmish Land application renders and behaves at runtime",
      "properties": {
        "renderMethod": {
          "type": "string",
          "enum": ["synchronous", "batched"],
          "default": "synchronous",
          "description": "Configures the React render method.\n- synchronous: New renders are triggered immediately after an update (recommended for controlled inputs)\n- batched: Renders are batched for smoother frame rates (may have issues with React controlled inputs)"
        },
        "renderTargetElementId": {
          "type": "string",
          "default": "app",
          "description": "Specifies the HTML element ID where your application will be mounted. The element must exist in your index.html file.",
          "minLength": 1
        },
        "routeMode": {
          "type": "string",
          "enum": ["hash", "path"],
          "default": "hash",
          "description": "Configures the routing mode.\n- hash: Uses URL with hash signs (#). Eg https://mydomain.com/#page1,\n- path: Uses URL without hash signs (#). Eg https://mydomain.com/page1"
        }
      },
      "additionalProperties": false
    },
    "view": {
      "type": "object",
      "description": "Configures the view layer and UI library used by your application",
      "properties": {
        "module": {
          "type": "string",
          "default": "Feliz",
          "description": "The F# module that contains your view types and elements. By default, Elmish Land uses Feliz for building React UIs.",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "default": "ReactElement",
          "description": "The type used for view elements in your application. This corresponds to the return type of your view functions.",
          "minLength": 1
        },
        "textElement": {
          "type": "string",
          "default": "Html.text",
          "description": "The function used to create text elements in your views. Used by the CLI when scaffolding new pages.",
          "minLength": 1
        }
      },
      "additionalProperties": false
    },
    "projectReferences": {
      "type": "array",
      "description": "An array of relative paths to additional F# project files (.fsproj) that should be referenced by your Elmish Land application. Useful for sharing code across multiple projects or using custom types in routes.",
      "items": {
        "type": "string",
        "description": "Relative path to an F# project file (.fsproj)",
        "pattern": ".*\\.fsproj$"
      },
      "default": [],
      "uniqueItems": true
    },
    "serverCommand": {
      "type": "string",
      "description": "Experimental, may change or be removed in the future! Custom command to run when executing 'elmish-land server'. The string is split on whitespace - first token is the executable, remaining tokens are arguments.\n\nExample: \"npm run dev\" will execute npm with arguments [\"run\", \"dev\"]",
      "minLength": 1
    },
    "fable": {
      "type": "object",
      "description": "Configures Fable compiler options per command",
      "properties": {
        "server": {
          "type": "object",
          "description": "Fable options for the 'elmish-land server' command",
          "properties": {
            "noCache": {
              "type": "boolean",
              "default": false,
              "description": "When true, passes --noCache to Fable to disable compilation cache during development"
            }
          },
          "additionalProperties": false
        },
        "build": {
          "type": "object",
          "description": "Fable options for the 'elmish-land build' command",
          "properties": {
            "noCache": {
              "type": "boolean",
              "default": true,
              "description": "When true, passes --noCache to Fable to disable compilation cache during production builds"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "viewType": {
      "type": "string",
      "default": "ReactElement",
      "description": "DEPRECATED: Use 'view.type' instead. This field is maintained for backward compatibility with older configurations.",
      "deprecated": true,
      "minLength": 1
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "program": {
        "renderMethod": "synchronous",
        "renderTargetElementId": "app"
      },
      "view": {
        "module": "Feliz",
        "type": "ReactElement",
        "textElement": "Html.text"
      },
      "projectReferences": []
    },
    {
      "program": {
        "renderMethod": "batched",
        "renderTargetElementId": "root"
      },
      "view": {
        "module": "MyProject.Common.UI",
        "type": "IElement",
        "textElement": "text"
      },
      "projectReferences": [
        "src/Common/Common.fsproj"
      ]
    }
  ]
}
